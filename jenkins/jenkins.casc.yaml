jenkins:
  scm:
    git:
      installations:
        - name: "Default"
          home: "/usr/bin/git"
          credentialsId: "github-credentials"  # Use the credentials ID here
  jobs:
    - script: |
        pipeline {
          agent any
          stages {
            stage('Checkout') {
              steps {
                git url: 'https://github.com/ankit-cn-47/jenkins-dynamic', credentialsId: 'github-credentials'
              }
            }
            stage('Run Jenkinsfile') {
              steps {
                script {
                  def jenkinsfile = load 'jenkins/jenkinsfile'
                  echo "Executing Jenkinsfile from repository"
                  jenkinsfile()
                }
              }
            }
          }
        }
